<Window x:Class="MineRefine.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Mine &amp; Refine Ultimate Edition">

    <Window.SystemBackdrop>
        <MicaBackdrop Kind="Base"/>
    </Window.SystemBackdrop>

    <Grid Background="#FF1E1E1E">
        <Grid.Resources>
            <!-- Enhanced Styles for Phase 1 -->
            <Style x:Key="CardStyle" TargetType="Border">
                <Setter Property="Background">
                    <Setter.Value>
                        <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                            <GradientStop Color="#DD2D2D30" Offset="0"/>
                            <GradientStop Color="#CC1E1E1E" Offset="1"/>
                        </LinearGradientBrush>
                    </Setter.Value>
                </Setter>
                <Setter Property="CornerRadius" Value="12"/>
                <Setter Property="Padding" Value="15,15,15,15"/>
                <Setter Property="BorderBrush" Value="#60FFD700"/>
                <Setter Property="BorderThickness" Value="2,2,2,2"/>
                <Setter Property="Margin" Value="10,10,10,10"/>
            </Style>

            <Style x:Key="TabButtonStyle" TargetType="Button">
                <Setter Property="Background" Value="Transparent"/>
                <Setter Property="Foreground" Value="White"/>
                <Setter Property="BorderThickness" Value="0,0,0,0"/>
                <Setter Property="Padding" Value="20,12,20,12"/>
                <Setter Property="FontSize" Value="14"/>
                <Setter Property="FontWeight" Value="Bold"/>
                <Setter Property="CornerRadius" Value="8,8,0,0"/>
                <Setter Property="Margin" Value="2,0,2,0"/>
            </Style>

            <Style x:Key="ActionButtonStyle" TargetType="Button">
                <Setter Property="MinWidth" Value="120"/>
                <Setter Property="MinHeight" Value="40"/>
                <Setter Property="Margin" Value="5,5,5,5"/>
                <Setter Property="CornerRadius" Value="8"/>
                <Setter Property="FontWeight" Value="Bold"/>
                <Setter Property="FontSize" Value="13"/>
                <Setter Property="Foreground" Value="White"/>
                <Setter Property="BorderThickness" Value="2,2,2,2"/>
                <Setter Property="BorderBrush" Value="#70FFD700"/>
                <Setter Property="Background">
                    <Setter.Value>
                        <LinearGradientBrush StartPoint="0,0" EndPoint="0,1">
                            <GradientStop Color="#FF228B22" Offset="0"/>
                            <GradientStop Color="#FF006400" Offset="1"/>
                        </LinearGradientBrush>
                    </Setter.Value>
                </Setter>
            </Style>
        </Grid.Resources>

        <!-- Background Effects -->
        <Canvas IsHitTestVisible="False" Opacity="0.15">
            <Ellipse Width="300" Height="300" Fill="#FFD700" Opacity="0.1" Canvas.Left="100" Canvas.Top="200"/>
            <Ellipse Width="250" Height="250" Fill="#9370DB" Opacity="0.1" Canvas.Left="800" Canvas.Top="400"/>
            <Ellipse Width="200" Height="200" Fill="#32CD32" Opacity="0.1" Canvas.Left="1200" Canvas.Top="100"/>
        </Canvas>

        <!-- Particle Effects Canvas -->
        <Canvas x:Name="ParticleCanvas" IsHitTestVisible="False" Opacity="0.8"/>

        <!-- Main Layout -->
        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
            </Grid.RowDefinitions>

            <!-- Header Section -->
            <Border Grid.Row="0" Style="{StaticResource CardStyle}" Margin="5,5,5,10">
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>

                    <!-- Logo and Title -->
                    <StackPanel Grid.Column="0" Orientation="Horizontal" Spacing="15">
                        <TextBlock Text="â›ï¸" FontSize="36" VerticalAlignment="Center"/>
                        <StackPanel VerticalAlignment="Center">
                            <TextBlock Text="MINE &amp; REFINE" FontSize="20" FontWeight="Bold" Foreground="#FFD700"/>
                            <TextBlock Text="Ultimate Edition v1.0.0-alpha" FontSize="10" Foreground="LightGray"/>
                            <TextBlock Text="Last Updated: 2025-07-31 13:29:22 UTC" FontSize="8" Foreground="Gray"/>
                        </StackPanel>
                    </StackPanel>

                    <!-- Current Time and Status -->
                    <StackPanel Grid.Column="1" HorizontalAlignment="Center" VerticalAlignment="Center">
                        <TextBlock x:Name="CurrentTimeTextBlock" 
                                   Text="2025-07-31 13:29:22 UTC" 
                                   FontSize="14" 
                                   FontWeight="Bold" 
                                   Foreground="White" 
                                   HorizontalAlignment="Center"/>
                        <TextBlock Text="ðŸŒŸ Quantum Mining Systems Online" 
                                   FontSize="12" 
                                   Foreground="LightGreen" 
                                   HorizontalAlignment="Center"/>
                    </StackPanel>

                    <!-- Quick Actions -->
                    <StackPanel Grid.Column="2" Orientation="Horizontal" Spacing="10">
                        <Button x:Name="QuickStatsButton" 
                                Style="{StaticResource ActionButtonStyle}" 
                                Background="#AA4169E1"
                                Click="QuickStatsButton_Click">
                            <StackPanel Orientation="Horizontal" Spacing="5">
                                <TextBlock Text="ðŸ“Š" FontSize="14"/>
                                <TextBlock Text="Stats" FontSize="11"/>
                            </StackPanel>
                        </Button>
                        <Button x:Name="UpgradesButton" 
                                Style="{StaticResource ActionButtonStyle}" 
                                Background="#AA800080"
                                Click="UpgradesButton_Click">
                            <StackPanel Orientation="Horizontal" Spacing="5">
                                <TextBlock Text="âš™ï¸" FontSize="14"/>
                                <TextBlock Text="Upgrades" FontSize="11"/>
                            </StackPanel>
                        </Button>
                        <Button x:Name="AutoMiningButton" 
                                Style="{StaticResource ActionButtonStyle}" 
                                Background="#AA8B4513"
                                Click="ToggleAutoMining_Click">
                            <StackPanel Orientation="Horizontal" Spacing="5">
                                <TextBlock Text="ðŸ¤–" FontSize="14"/>
                                <TextBlock Text="Auto-Mine" FontSize="11"/>
                            </StackPanel>
                        </Button>
                    </StackPanel>
                </Grid>
            </Border>

            <!-- Enhanced Tab Navigation with Content -->
            <Border Grid.Row="1" Background="#AA2D2D30" CornerRadius="0" Margin="5,0,5,0">
                <TabView x:Name="MainTabView" 
                         Style="{StaticResource UltimateTabViewStyle}"
                         SelectionChanged="MainTabView_SelectionChanged"
                         AutomationProperties.Name="Main Navigation Tabs"
                         AutomationProperties.HelpText="Navigate between different game sections">
                    
                    <!-- Mining Tab -->
                    <TabViewItem x:Name="MineTabItem" 
                                 Header="â›ï¸ MINE" 
                                 Style="{StaticResource UltimateTabViewItemStyle}"
                                 AutomationProperties.Name="Mining Operations"
                                 AutomationProperties.HelpText="Access mining operations and controls (Ctrl+1)">
                        <ScrollViewer x:Name="MineContent" VerticalScrollBarVisibility="Auto">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="2*"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>

                                <!-- Main Mining Panel -->
                                <StackPanel Grid.Column="0" Spacing="15">
                                    <!-- Player Status Card -->
                                    <Border Style="{StaticResource CardStyle}">
                                        <Grid>
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="*"/>
                                                <ColumnDefinition Width="*"/>
                                                <ColumnDefinition Width="*"/>
                                            </Grid.ColumnDefinitions>

                                            <!-- Player Info -->
                                            <StackPanel Grid.Column="0" Spacing="8">
                                                <TextBlock Text="ðŸ‘¤ Miner Profile" FontSize="16" FontWeight="Bold" Foreground="#FFD700"/>
                                                <StackPanel Spacing="3">
                                                    <TextBlock x:Name="PlayerNameTextBlock" Text="Anonymous Miner" FontSize="14" FontWeight="Bold" Foreground="White"/>
                                                    <TextBlock x:Name="PlayerRankTextBlock" Text="Novice Miner" FontSize="12" Foreground="LightGray"/>
                                                    <TextBlock x:Name="PlayerLevelTextBlock" Text="Level 1" FontSize="12" Foreground="LightBlue"/>
                                                </StackPanel>
                                            </StackPanel>

                                            <!-- Financial Status -->
                                            <StackPanel Grid.Column="1" Spacing="8">
                                                <TextBlock Text="ðŸ’° Financial Status" FontSize="16" FontWeight="Bold" Foreground="#FFD700"/>
                                                <StackPanel Spacing="3">
                                                    <TextBlock x:Name="PlayerMoneyTextBlock" Text="Â£0" FontSize="14" FontWeight="Bold" Foreground="White"/>
                                                    <TextBlock x:Name="TotalEarningsTextBlock" Text="Lifetime: Â£0" FontSize="12" Foreground="LightGray"/>
                                                    <TextBlock x:Name="PlayerNetWorthTextBlock" Text="Net Worth: Â£0" FontSize="12" Foreground="Gold"/>
                                                </StackPanel>
                                            </StackPanel>

                                            <!-- Mining Stats -->
                                            <StackPanel Grid.Column="2" Spacing="8">
                                                <TextBlock Text="â›ï¸ Mining Stats" FontSize="16" FontWeight="Bold" Foreground="#FFD700"/>
                                                <StackPanel Spacing="3">
                                                    <TextBlock x:Name="TotalMinesTextBlock" Text="Mines: 0" FontSize="12" Foreground="White"/>
                                                    <TextBlock x:Name="SuccessRateTextBlock" Text="Success: 0%" FontSize="12" Foreground="LightGreen"/>
                                                    <TextBlock x:Name="SkillPointsTextBlock" Text="Skill Points: 0" FontSize="12" Foreground="LightBlue"/>
                                                </StackPanel>
                                            </StackPanel>
                                        </Grid>
                                    </Border>

                                    <!-- Location and Risk Selection -->
                                    <Border Style="{StaticResource CardStyle}">
                                        <StackPanel Spacing="15">
                                            <TextBlock Text="ðŸ—ºï¸ Mining Location &amp; Risk Assessment" FontSize="18" FontWeight="Bold" Foreground="#FFD700"/>

                                            <!-- Location Selection -->
                                            <StackPanel Spacing="8">
                                                <TextBlock Text="Current Mining Location" FontSize="14" FontWeight="Bold" Foreground="White"/>
                                                <ComboBox x:Name="LocationComboBox" 
                                                          FontSize="14" 
                                                          Background="#AA2D2D30" 
                                                          Foreground="White" 
                                                          BorderBrush="#60FFD700" 
                                                          BorderThickness="2,2,2,2"
                                                          SelectionChanged="LocationComboBox_SelectionChanged"/>
                                                <TextBlock x:Name="LocationDescriptionTextBlock" 
                                                           Text="Select a location to begin mining operations" 
                                                           FontSize="12" 
                                                           Foreground="LightGray" 
                                                           TextWrapping="Wrap"/>
                                            </StackPanel>

                                            <!-- Weather and Environment -->
                                            <Grid>
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition Width="*"/>
                                                    <ColumnDefinition Width="*"/>
                                                </Grid.ColumnDefinitions>

                                                <StackPanel Grid.Column="0" Spacing="5">
                                                    <TextBlock Text="ðŸŒ¤ï¸ Environmental Conditions" FontSize="14" FontWeight="Bold" Foreground="White"/>
                                                    <StackPanel Orientation="Horizontal" Spacing="10">
                                                        <TextBlock Text="Weather:" FontSize="12" Foreground="LightGray"/>
                                                        <TextBlock x:Name="WeatherTextBlock" Text="Clear" FontSize="12" Foreground="LightGreen"/>
                                                    </StackPanel>
                                                    <StackPanel Orientation="Horizontal" Spacing="10">
                                                        <TextBlock Text="Location:" FontSize="12" Foreground="LightGray"/>
                                                        <TextBlock x:Name="CurrentLocationTextBlock" Text="None" FontSize="12" Foreground="White"/>
                                                    </StackPanel>
                                                </StackPanel>

                                                <StackPanel Grid.Column="1" Spacing="5">
                                                    <TextBlock Text="âš¡ Energy Status" FontSize="14" FontWeight="Bold" Foreground="White"/>
                                                    <StackPanel Spacing="3">
                                                        <TextBlock Text="Stamina" FontSize="12" Foreground="LightGray"/>
                                                        <ProgressBar x:Name="StaminaProgressBar" 
                                                                   Height="8" 
                                                                   Minimum="0" 
                                                                   Maximum="100" 
                                                                   Value="100" 
                                                                   Foreground="LightGreen"/>
                                                        <TextBlock Text="Experience" FontSize="12" Foreground="LightGray"/>
                                                        <ProgressBar x:Name="ExperienceProgressBar" 
                                                                   Height="6" 
                                                                   Minimum="0" 
                                                                   Maximum="100" 
                                                                   Value="0" 
                                                                   Foreground="LightBlue"/>
                                                    </StackPanel>
                                                </StackPanel>
                                            </Grid>

                                            <!-- Risk Assessment -->
                                            <StackPanel Spacing="8">
                                                <TextBlock Text="âš ï¸ Risk Assessment Protocol" FontSize="14" FontWeight="Bold" Foreground="White"/>
                                                <Slider x:Name="RiskSlider" 
                                                        Minimum="1.0" 
                                                        Maximum="3.0" 
                                                        Value="1.5" 
                                                        StepFrequency="0.1" 
                                                        TickFrequency="0.5" 
                                                        TickPlacement="BottomRight"
                                                        ValueChanged="RiskSlider_ValueChanged"/>
                                                <TextBlock x:Name="RiskDescriptionTextBlock" 
                                                           Text="Balanced Protocol (Moderate Risk, Good Rewards) (1.5x)" 
                                                           FontSize="12" 
                                                           Foreground="Orange" 
                                                           TextWrapping="Wrap"/>
                                            </StackPanel>

                                            <!-- Mining Actions -->
                                            <StackPanel Orientation="Horizontal" HorizontalAlignment="Center" Spacing="15">
                                                <Button x:Name="MineButton" 
                                                        Style="{StaticResource ActionButtonStyle}" 
                                                        MinWidth="150" 
                                                        MinHeight="50"
                                                        Click="MineButton_Click"
                                                        AutomationProperties.Name="Start Mining Operation"
                                                        AutomationProperties.HelpText="Begin mining at current location with selected risk level"
                                                        ToolTipService.ToolTip="Start mining operation (Ctrl+M or Space)">
                                                    <StackPanel Orientation="Horizontal" Spacing="10">
                                                        <TextBlock Text="â›ï¸" FontSize="20"/>
                                                        <TextBlock Text="START MINING" FontSize="14" FontWeight="Bold"/>
                                                    </StackPanel>
                                                </Button>

                                                <Button x:Name="RestButton" 
                                                        Style="{StaticResource ActionButtonStyle}" 
                                                        Background="#AA4682B4"
                                                        Click="RestButton_Click"
                                                        AutomationProperties.Name="Rest and Recover Stamina"
                                                        AutomationProperties.HelpText="Restore stamina and health"
                                                        ToolTipService.ToolTip="Rest to recover stamina (Ctrl+R)">
                                                    <StackPanel Orientation="Horizontal" Spacing="8">
                                                        <TextBlock Text="ðŸ˜´" FontSize="16"/>
                                                        <TextBlock Text="REST" FontWeight="Bold"/>
                                                    </StackPanel>
                                                </Button>
                                            </StackPanel>
                                        </StackPanel>
                                    </Border>

                                    <!-- Mining Session History -->
                                    <Border Style="{StaticResource CardStyle}">
                                        <StackPanel Spacing="10">
                                            <StackPanel Orientation="Horizontal" Spacing="15">
                                                <TextBlock Text="ðŸ“Š Recent Mining Operations" FontSize="16" FontWeight="Bold" Foreground="#FFD700"/>
                                                <Button x:Name="ClearLogButton" 
                                                        Content="ðŸ§¹ Clear Log" 
                                                        FontSize="10" 
                                                        Background="Transparent" 
                                                        Foreground="LightGray" 
                                                        BorderThickness="1,1,1,1" 
                                                        BorderBrush="Gray"
                                                        Padding="8,4,8,4"
                                                        Click="ClearLogButton_Click"/>
                                            </StackPanel>

                                            <ScrollViewer Height="200" VerticalScrollBarVisibility="Auto">
                                                <StackPanel x:Name="GameLogPanel" Spacing="2"/>
                                            </ScrollViewer>
                                        </StackPanel>
                                    </Border>
                                </StackPanel>

                                <!-- Right Sidebar -->
                                <StackPanel Grid.Column="1" Spacing="15" Margin="15,0,0,0">
                                    <!-- Equipment Status -->
                                    <Border Style="{StaticResource CardStyle}">
                                        <StackPanel Spacing="10">
                                            <TextBlock Text="âš’ï¸ Equipment Status" FontSize="16" FontWeight="Bold" Foreground="#FFD700"/>
                                            <ScrollViewer x:Name="EquipmentScrollViewer" Height="150" VerticalScrollBarVisibility="Auto">
                                                <StackPanel x:Name="EquipmentPanel" Spacing="8"/>
                                            </ScrollViewer>
                                            <Button Content="ðŸ”§ Manage Equipment" 
                                                    Background="#AA800080" 
                                                    Foreground="White" 
                                                    CornerRadius="6" 
                                                    Padding="10,5,10,5"
                                                    Click="UpgradesButton_Click"/>
                                        </StackPanel>
                                    </Border>

                                    <!-- Market Overview -->
                                    <Border Style="{StaticResource CardStyle}">
                                        <StackPanel Spacing="10">
                                            <TextBlock Text="ðŸ“ˆ Market Overview" FontSize="16" FontWeight="Bold" Foreground="#FFD700"/>
                                            <StackPanel x:Name="MarketOverviewPanel" Spacing="5"/>
                                            <Button Content="ðŸ“Š Full Market" 
                                                    Background="#AA4169E1" 
                                                    Foreground="White" 
                                                    CornerRadius="6" 
                                                    Padding="10,5,10,5"
                                                    Click="MarketTabButton_Click"/>
                                        </StackPanel>
                                    </Border>

                                    <!-- Quick Actions -->
                                    <Border Style="{StaticResource CardStyle}">
                                        <StackPanel Spacing="10">
                                            <TextBlock Text="ðŸš€ Quick Actions" FontSize="16" FontWeight="Bold" Foreground="#FFD700"/>
                                            <StackPanel Spacing="8">
                                                <Button x:Name="StartNewGameButton" 
                                                        Content="ðŸŽ® New Game" 
                                                        Background="#AA228B22" 
                                                        Foreground="White" 
                                                        CornerRadius="6" 
                                                        Padding="10,5,10,5"
                                                        Click="StartNewGameButton_Click"/>
                                                <Button x:Name="LoadExistingGameButton" 
                                                        Content="ðŸ“ Load Game" 
                                                        Background="#AA4682B4" 
                                                        Foreground="White" 
                                                        CornerRadius="6" 
                                                        Padding="10,5,10,5"
                                                        Click="LoadExistingGameButton_Click"/>
                                                <Button x:Name="ChallengesButton" 
                                                        Content="ðŸŽ¯ Challenges" 
                                                        Background="#AAB8860B" 
                                                        Foreground="White" 
                                                        CornerRadius="6" 
                                                        Padding="10,5,10,5"
                                                        Click="ChallengesButton_Click"/>
                                            </StackPanel>
                                        </StackPanel>
                                    </Border>
                                </StackPanel>
                            </Grid>
                        </ScrollViewer>
                    </TabViewItem>

                    <!-- Locations Tab -->
                    <TabViewItem x:Name="LocationsTabItem" 
                                 Header="ðŸ—ºï¸ LOCATIONS" 
                                 Style="{StaticResource UltimateTabViewItemStyle}"
                                 AutomationProperties.Name="Mining Locations"
                                 AutomationProperties.HelpText="Explore and manage mining locations (Ctrl+2)">
                        <StackPanel x:Name="LocationsContent" Spacing="15"/>
                    </TabViewItem>

                    <!-- Skills Tab -->
                    <TabViewItem x:Name="SkillsTabItem" 
                                 Header="âš¡ SKILLS" 
                                 Style="{StaticResource UltimateTabViewItemStyle}"
                                 AutomationProperties.Name="Skill Development"
                                 AutomationProperties.HelpText="Manage skills and abilities (Ctrl+3)">
                        <ScrollViewer x:Name="SkillsContent" VerticalScrollBarVisibility="Auto">
                            <StackPanel Spacing="15">
                                <!-- Skills Header -->
                                <Border Style="{StaticResource CardStyle}">
                                    <Grid>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="*"/>
                                            <ColumnDefinition Width="Auto"/>
                                        </Grid.ColumnDefinitions>
                                        
                                        <StackPanel Grid.Column="0" Spacing="8">
                                            <TextBlock Text="âš¡ SKILL DEVELOPMENT" FontSize="24" FontWeight="Bold" Foreground="#FFD700"/>
                                            <TextBlock x:Name="SkillsStatsTextBlock" Text="Available Skill Points: 0 | Total Skills: 0/25" FontSize="14" Foreground="LightGray"/>
                                            <TextBlock Text="Develop your mining expertise through specialized skill trees" FontSize="12" Foreground="White" TextWrapping="Wrap"/>
                                        </StackPanel>
                                        
                                        <StackPanel Grid.Column="1" Spacing="8">
                                            <Button x:Name="ResetSkillsButton" 
                                                    Content="ðŸ”„ Reset Skills" 
                                                    Background="#AA8B0000" 
                                                    Foreground="White" 
                                                    CornerRadius="6" 
                                                    Padding="12,6,12,6"
                                                    Click="ResetSkillsButton_Click"/>
                                            <Button x:Name="SkillsHelpButton" 
                                                    Content="â“ Help" 
                                                    Background="#AA4682B4" 
                                                    Foreground="White" 
                                                    CornerRadius="6" 
                                                    Padding="12,6,12,6"
                                                    Click="SkillsHelpButton_Click"/>
                                        </StackPanel>
                                    </Grid>
                                </Border>

                                <!-- Skill Categories -->
                                <Border Style="{StaticResource CardStyle}">
                                    <StackPanel Spacing="10">
                                        <TextBlock Text="ðŸŽ¯ Skill Categories" FontSize="18" FontWeight="Bold" Foreground="#FFD700"/>
                                        
                                        <!-- Category Tabs -->
                                        <StackPanel Orientation="Horizontal" Spacing="8">
                                            <Button x:Name="MiningSkillsCategoryButton" Content="â›ï¸ Mining" Tag="Mining" Click="SkillCategoryButton_Click" Style="{StaticResource ActionButtonStyle}" Background="#AA228B22" MinWidth="100"/>
                                            <Button x:Name="EquipmentSkillsCategoryButton" Content="âš’ï¸ Equipment" Tag="Equipment" Click="SkillCategoryButton_Click" Style="{StaticResource ActionButtonStyle}" Background="#AA800080" MinWidth="100"/>
                                            <Button x:Name="ExplorationSkillsCategoryButton" Content="ðŸ—ºï¸ Exploration" Tag="Exploration" Click="SkillCategoryButton_Click" Style="{StaticResource ActionButtonStyle}" Background="#AA4169E1" MinWidth="100"/>
                                            <Button x:Name="EconomicSkillsCategoryButton" Content="ðŸ’° Economic" Tag="Economic" Click="SkillCategoryButton_Click" Style="{StaticResource ActionButtonStyle}" Background="#AAB8860B" MinWidth="100"/>
                                            <Button x:Name="QuantumSkillsCategoryButton" Content="ðŸŒŒ Quantum" Tag="Quantum" Click="SkillCategoryButton_Click" Style="{StaticResource ActionButtonStyle}" Background="#AA8A2BE2" MinWidth="100"/>
                                        </StackPanel>
                                        
                                        <!-- Skills Display Area -->
                                        <ScrollViewer x:Name="SkillsScrollViewer" Height="400" VerticalScrollBarVisibility="Auto">
                                            <Grid x:Name="SkillTreeGrid">
                                                <!-- Skills will be dynamically populated here -->
                                            </Grid>
                                        </ScrollViewer>
                                    </StackPanel>
                                </Border>

                                <!-- Active Skills Summary -->
                                <Border Style="{StaticResource CardStyle}">
                                    <StackPanel Spacing="10">
                                        <TextBlock Text="ðŸŽ–ï¸ Active Skill Bonuses" FontSize="16" FontWeight="Bold" Foreground="#FFD700"/>
                                        <ScrollViewer x:Name="ActiveSkillsScrollViewer" Height="150" VerticalScrollBarVisibility="Auto">
                                            <StackPanel x:Name="ActiveSkillsPanel" Spacing="5"/>
                                        </ScrollViewer>
                                    </StackPanel>
                                </Border>
                            </StackPanel>
                        </ScrollViewer>
                    </TabViewItem>

                    <!-- Achievements Tab -->
                    <TabViewItem x:Name="AchievementsTabItem" Header="ðŸ† ACHIEVEMENTS" Style="{StaticResource UltimateTabViewItemStyle}">
                        <ScrollViewer x:Name="AchievementsContent" VerticalScrollBarVisibility="Auto">
                            <StackPanel Spacing="15">
                                <!-- Achievements Header -->
                                <Border Style="{StaticResource CardStyle}">
                                    <Grid>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="*"/>
                                            <ColumnDefinition Width="Auto"/>
                                        </Grid.ColumnDefinitions>
                                        
                                        <StackPanel Grid.Column="0" Spacing="8">
                                            <TextBlock Text="ðŸ† ACHIEVEMENTS" FontSize="24" FontWeight="Bold" Foreground="#FFD700"/>
                                            <TextBlock x:Name="AchievementsStatsTextBlock" Text="Progress: 0/30 (0%) | Points: 0" FontSize="14" Foreground="LightGray"/>
                                            <TextBlock Text="Track your mining accomplishments and unlock special rewards" FontSize="12" Foreground="White" TextWrapping="Wrap"/>
                                        </StackPanel>
                                        
                                        <StackPanel Grid.Column="1" Spacing="8">
                                            <Button x:Name="ShowHiddenAchievementsButton" 
                                                    Content="ðŸ‘ï¸ Hidden" 
                                                    Background="#AA4B0082" 
                                                    Foreground="White" 
                                                    CornerRadius="6" 
                                                    Padding="12,6,12,6"
                                                    Click="ShowHiddenAchievementsButton_Click"/>
                                            <Button x:Name="AchievementsHelpButton" 
                                                    Content="â“ Help" 
                                                    Background="#AA4682B4" 
                                                    Foreground="White" 
                                                    CornerRadius="6" 
                                                    Padding="12,6,12,6"
                                                    Click="AchievementsHelpButton_Click"/>
                                        </StackPanel>
                                    </Grid>
                                </Border>

                                <!-- Achievement Categories -->
                                <Border Style="{StaticResource CardStyle}">
                                    <StackPanel Spacing="10">
                                        <TextBlock Text="ðŸ“‚ Achievement Categories" FontSize="18" FontWeight="Bold" Foreground="#FFD700"/>
                                        
                                        <!-- Category Filter -->
                                        <StackPanel Orientation="Horizontal" Spacing="8">
                                            <Button x:Name="AllAchievementsCategoryButton" Content="ðŸ“‹ All" Tag="All" Click="AchievementCategoryButton_Click" Style="{StaticResource ActionButtonStyle}" Background="#AA555555" MinWidth="80"/>
                                            <Button x:Name="MiningAchievementsCategoryButton" Content="â›ï¸ Mining" Tag="Mining" Click="AchievementCategoryButton_Click" Style="{StaticResource ActionButtonStyle}" Background="#AA228B22" MinWidth="80"/>
                                            <Button x:Name="FinancialAchievementsCategoryButton" Content="ðŸ’° Financial" Tag="Financial" Click="AchievementCategoryButton_Click" Style="{StaticResource ActionButtonStyle}" Background="#AAB8860B" MinWidth="80"/>
                                            <Button x:Name="DiscoveryAchievementsCategoryButton" Content="ðŸ’Ž Discovery" Tag="Discovery" Click="AchievementCategoryButton_Click" Style="{StaticResource ActionButtonStyle}" Background="#AA4169E1" MinWidth="80"/>
                                            <Button x:Name="ExplorationAchievementsCategoryButton" Content="ðŸ—ºï¸ Exploration" Tag="Exploration" Click="AchievementCategoryButton_Click" Style="{StaticResource ActionButtonStyle}" Background="#AA800080" MinWidth="80"/>
                                            <Button x:Name="SkillsAchievementsCategoryButton" Content="ðŸ“š Skills" Tag="Skills" Click="AchievementCategoryButton_Click" Style="{StaticResource ActionButtonStyle}" Background="#AA4682B4" MinWidth="80"/>
                                            <Button x:Name="SpecialAchievementsCategoryButton" Content="â­ Special" Tag="Special" Click="AchievementCategoryButton_Click" Style="{StaticResource ActionButtonStyle}" Background="#AA8A2BE2" MinWidth="80"/>
                                        </StackPanel>
                                        
                                        <!-- Achievements Display -->
                                        <ScrollViewer x:Name="AchievementsScrollViewer" Height="400" VerticalScrollBarVisibility="Auto">
                                            <StackPanel x:Name="AchievementsPanel" Spacing="8"/>
                                        </ScrollViewer>
                                    </StackPanel>
                                </Border>

                                <!-- Achievement Progress Summary -->
                                <Border Style="{StaticResource CardStyle}">
                                    <StackPanel Spacing="10">
                                        <TextBlock Text="ðŸ“Š Progress Summary" FontSize="16" FontWeight="Bold" Foreground="#FFD700"/>
                                        <Grid>
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="*"/>
                                                <ColumnDefinition Width="*"/>
                                            </Grid.ColumnDefinitions>
                                            
                                            <StackPanel Grid.Column="0" Spacing="8">
                                                <TextBlock Text="Category Progress" FontSize="14" FontWeight="Bold" Foreground="White"/>
                                                <StackPanel x:Name="CategoryProgressPanel" Spacing="5"/>
                                            </StackPanel>
                                            
                                            <StackPanel Grid.Column="1" Spacing="8">
                                                <TextBlock Text="Recent Achievements" FontSize="14" FontWeight="Bold" Foreground="White"/>
                                                <StackPanel x:Name="RecentAchievementsPanel" Spacing="5"/>
                                            </StackPanel>
                                        </Grid>
                                    </StackPanel>
                                </Border>
                            </StackPanel>
                        </ScrollViewer>
                    </TabViewItem>

                    <!-- Market Tab -->
                    <TabViewItem x:Name="MarketTabItem" Header="ðŸ“ˆ MARKET" Style="{StaticResource UltimateTabViewItemStyle}">
                        <StackPanel x:Name="MarketContent" Spacing="15">
                            <Border Style="{StaticResource CardStyle}">
                                <StackPanel Spacing="15" HorizontalAlignment="Center">
                                    <TextBlock Text="ðŸ“ˆ MINERAL MARKET" FontSize="24" FontWeight="Bold" Foreground="#FFD700" HorizontalAlignment="Center"/>
                                    <TextBlock Text="ðŸš§ Market system coming in Phase 3!" FontSize="16" Foreground="Orange" HorizontalAlignment="Center"/>
                                    <TextBlock Text="Upcoming market features:" FontSize="14" Foreground="White" HorizontalAlignment="Center"/>
                                    <StackPanel Spacing="8" HorizontalAlignment="Center">
                                        <TextBlock Text="â€¢ Real-time mineral price tracking and charts" FontSize="12" Foreground="LightGray"/>
                                        <TextBlock Text="â€¢ Economic events affecting market conditions" FontSize="12" Foreground="LightGray"/>
                                        <TextBlock Text="â€¢ Trading contracts and investment opportunities" FontSize="12" Foreground="LightGray"/>
                                        <TextBlock Text="â€¢ Market analysis and trend predictions" FontSize="12" Foreground="LightGray"/>
                                    </StackPanel>
                                </StackPanel>
                            </Border>
                        </StackPanel>
                    </TabViewItem>

                    <!-- Menu Tab -->
                    <TabViewItem x:Name="MenuTabItem" Header="âš™ï¸ MENU" Style="{StaticResource UltimateTabViewItemStyle}">
                        <StackPanel x:Name="MenuContent" Spacing="15">
                            <Border Style="{StaticResource CardStyle}">
                                <StackPanel Spacing="15" HorizontalAlignment="Center">
                                    <TextBlock Text="âš™ï¸ GAME MENU" FontSize="24" FontWeight="Bold" Foreground="#FFD700" HorizontalAlignment="Center"/>
                                    <TextBlock Text="ðŸš§ Advanced menu system coming in Phase 4!" FontSize="16" Foreground="Orange" HorizontalAlignment="Center"/>
                                    <TextBlock Text="Planned menu features:" FontSize="14" Foreground="White" HorizontalAlignment="Center"/>
                                    <StackPanel Spacing="8" HorizontalAlignment="Center">
                                        <TextBlock Text="â€¢ Comprehensive game settings and preferences" FontSize="12" Foreground="LightGray"/>
                                        <TextBlock Text="â€¢ Detailed statistics and analytics dashboard" FontSize="12" Foreground="LightGray"/>
                                        <TextBlock Text="â€¢ Save/load management with cloud sync" FontSize="12" Foreground="LightGray"/>
                                        <TextBlock Text="â€¢ Help system and interactive tutorials" FontSize="12" Foreground="LightGray"/>
                                    </StackPanel>
                                </StackPanel>
                            </Border>
                        </StackPanel>
                    </TabViewItem>
                </TabView>
            </Border>
        </Grid>

        <!-- Notification System -->
        <Border x:Name="NotificationBorder" 
                Background="#DD2D2D30" 
                CornerRadius="10" 
                Padding="20,15,20,15" 
                BorderBrush="#FFD700" 
                BorderThickness="2,2,2,2"
                HorizontalAlignment="Right" 
                VerticalAlignment="Top" 
                Margin="20,20,20,20" 
                Visibility="Collapsed">
            <StackPanel Spacing="8" MaxWidth="300">
                <StackPanel Orientation="Horizontal" Spacing="10">
                    <TextBlock x:Name="NotificationTitle" Text="Notification" FontSize="14" FontWeight="Bold" Foreground="#FFD700"/>
                    <Button x:Name="CloseNotificationButton" 
                            Content="âœ•" 
                            Background="Transparent" 
                            Foreground="LightGray" 
                            BorderThickness="0,0,0,0" 
                            FontSize="12" 
                            Padding="5,0,5,0"
                            Click="CloseNotification_Click"/>
                </StackPanel>
                <TextBlock x:Name="NotificationMessage" 
                           Text="Message" 
                           FontSize="12" 
                           Foreground="White" 
                           TextWrapping="Wrap"/>
            </StackPanel>
        </Border>

        <!-- Loading Overlay -->
        <Grid x:Name="LoadingOverlay" Background="#CC000000" Visibility="Collapsed">
            <Border Background="#DD2D2D30" 
                    CornerRadius="15" 
                    Padding="40,30,40,30" 
                    BorderBrush="#FFD700" 
                    BorderThickness="2,2,2,2"
                    HorizontalAlignment="Center"
                    VerticalAlignment="Center">
                <StackPanel Spacing="15">
                    <StackPanel Orientation="Horizontal" Spacing="15" HorizontalAlignment="Center">
                        <TextBlock Text="âš™ï¸" FontSize="32"/>
                        <TextBlock x:Name="LoadingTitle" Text="Processing..." FontSize="16" FontWeight="Bold" Foreground="#FFD700"/>
                    </StackPanel>
                    <TextBlock x:Name="LoadingMessage" Text="Please wait..." FontSize="12" Foreground="LightGray" HorizontalAlignment="Center"/>
                    <ProgressBar IsIndeterminate="True" Height="4" Foreground="#FFD700" Background="#AA2D2D30"/>
                </StackPanel>
            </Border>
        </Grid>
    </Grid>
</Window>