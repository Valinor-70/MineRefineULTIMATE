<Window x:Class="MineRefine.PlayerSetupWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Mine &amp; Refine - Player Setup">

    <Window.SystemBackdrop>
        <MicaBackdrop Kind="Base"/>
    </Window.SystemBackdrop>

    <Grid Background="#FF1E1E1E" Width="800" Height="600">
        <Grid.Resources>
            <!-- Player Setup Theme Styles -->
            <Style x:Key="SetupCardStyle" TargetType="Border">
                <Setter Property="Background">
                    <Setter.Value>
                        <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                            <GradientStop Color="#DD2D2D30" Offset="0"/>
                            <GradientStop Color="#CC1E1E1E" Offset="1"/>
                        </LinearGradientBrush>
                    </Setter.Value>
                </Setter>
                <Setter Property="CornerRadius" Value="12"/>
                <Setter Property="Padding" Value="20,20,20,20"/>
                <Setter Property="BorderBrush" Value="#60FFD700"/>
                <Setter Property="BorderThickness" Value="2,2,2,2"/>
                <Setter Property="Margin" Value="10,10,10,10"/>
            </Style>

            <Style x:Key="SetupButtonStyle" TargetType="Button">
                <Setter Property="MinWidth" Value="120"/>
                <Setter Property="MinHeight" Value="40"/>
                <Setter Property="Margin" Value="5,5,5,5"/>
                <Setter Property="CornerRadius" Value="8"/>
                <Setter Property="FontWeight" Value="Bold"/>
                <Setter Property="FontSize" Value="14"/>
                <Setter Property="Foreground" Value="White"/>
                <Setter Property="BorderThickness" Value="2,2,2,2"/>
                <Setter Property="BorderBrush" Value="#70FFD700"/>
                <Setter Property="Background">
                    <Setter.Value>
                        <LinearGradientBrush StartPoint="0,0" EndPoint="0,1">
                            <GradientStop Color="#FF2D2D30" Offset="0"/>
                            <GradientStop Color="#FF1E1E1E" Offset="1"/>
                        </LinearGradientBrush>
                    </Setter.Value>
                </Setter>
            </Style>

            <Style x:Key="PrimarySetupButtonStyle" TargetType="Button" BasedOn="{StaticResource SetupButtonStyle}">
                <Setter Property="Background">
                    <Setter.Value>
                        <LinearGradientBrush StartPoint="0,0" EndPoint="0,1">
                            <GradientStop Color="#FF228B22" Offset="0"/>
                            <GradientStop Color="#FF006400" Offset="1"/>
                        </LinearGradientBrush>
                    </Setter.Value>
                </Setter>
                <Setter Property="BorderBrush" Value="#80228B22"/>
            </Style>
        </Grid.Resources>

        <!-- Background -->
        <Canvas IsHitTestVisible="False" Opacity="0.3">
            <Ellipse Width="300" Height="300" Fill="#FFD700" Opacity="0.1" Canvas.Left="100" Canvas.Top="50"/>
            <Ellipse Width="200" Height="200" Fill="#9370DB" Opacity="0.1" Canvas.Left="500" Canvas.Top="300"/>
        </Canvas>

        <!-- Main Setup Content -->
        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>

            <!-- Header -->
            <Border Grid.Row="0" Style="{StaticResource SetupCardStyle}">
                <StackPanel HorizontalAlignment="Center" Spacing="10">
                    <StackPanel Orientation="Horizontal" Spacing="15" HorizontalAlignment="Center">
                        <TextBlock Text="⛏️" FontSize="48"/>
                        <StackPanel>
                            <TextBlock Text="MINE &amp; REFINE" FontSize="28" FontWeight="Bold" Foreground="#FFD700"/>
                            <TextBlock Text="Ultimate Edition - Player Setup" FontSize="14" Foreground="LightGray" HorizontalAlignment="Center"/>
                        </StackPanel>
                        <TextBlock Text="💎" FontSize="48"/>
                    </StackPanel>
                    <TextBlock Text="Welcome to the most advanced mining simulation! Create your quantum miner profile." 
                               FontSize="14" 
                               Foreground="White" 
                               HorizontalAlignment="Center" 
                               TextWrapping="Wrap"/>
                </StackPanel>
            </Border>

            <!-- Setup Form -->
            <Border Grid.Row="1" Style="{StaticResource SetupCardStyle}">
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>

                    <!-- Left Column - Basic Info -->
                    <StackPanel Grid.Column="0" Spacing="20" Margin="0,0,20,0">
                        <TextBlock Text="👤 Miner Identity" FontSize="18" FontWeight="Bold" Foreground="#FFD700"/>

                        <!-- Player Name -->
                        <StackPanel Spacing="8">
                            <TextBlock Text="Miner Name" FontSize="14" FontWeight="Bold" Foreground="White"/>
                            <TextBox x:Name="PlayerNameTextBox" 
                                     Text="Valinor-70"
                                     FontSize="14" 
                                     Background="#AA2D2D30" 
                                     Foreground="White" 
                                     BorderBrush="#60FFD700" 
                                     BorderThickness="2,2,2,2"
                                     Padding="10,8,10,8"
                                     TextChanged="PlayerNameTextBox_TextChanged"/>
                            <TextBlock Text="Choose your mining identity (3-20 characters)" 
                                       FontSize="10" 
                                       Foreground="LightGray"/>
                        </StackPanel>

                        <!-- Difficulty Selection -->
                        <StackPanel Spacing="8">
                            <TextBlock Text="Mining Challenge Level" FontSize="14" FontWeight="Bold" Foreground="White"/>
                            <ComboBox x:Name="DifficultyComboBox" 
                                      FontSize="14" 
                                      Background="#AA2D2D30" 
                                      Foreground="White" 
                                      BorderBrush="#60FFD700" 
                                      BorderThickness="2,2,2,2"
                                      SelectionChanged="DifficultyComboBox_SelectionChanged">
                                <ComboBoxItem Content="🟢 Novice - Learn the basics" Tag="NOVICE"/>
                                <ComboBoxItem Content="🟡 Experienced - Balanced challenge" Tag="EXPERIENCED"/>
                                <ComboBoxItem Content="🟠 Expert - High risk, high reward" Tag="EXPERT" IsSelected="True"/>
                                <ComboBoxItem Content="🔴 Legendary - Master miner challenge" Tag="LEGENDARY"/>
                            </ComboBox>
                            <TextBlock x:Name="DifficultyDescriptionTextBlock" 
                                       Text="Expert mode: Enhanced rewards with increased risks. Perfect for experienced players seeking quantum challenges."
                                       FontSize="11" 
                                       Foreground="Orange" 
                                       TextWrapping="Wrap"/>
                        </StackPanel>

                        <!-- Starting Location Preview -->
                        <StackPanel Spacing="8">
                            <TextBlock Text="Starting Location" FontSize="14" FontWeight="Bold" Foreground="White"/>
                            <Border Background="#AA2D2D30" 
                                    CornerRadius="8" 
                                    Padding="15,10,15,10" 
                                    BorderBrush="#60FFD700" 
                                    BorderThickness="1,1,1,1">
                                <StackPanel Spacing="5">
                                    <StackPanel Orientation="Horizontal" Spacing="10">
                                        <TextBlock Text="🏔️" FontSize="20"/>
                                        <TextBlock Text="Mountain Surface Mine" FontSize="14" FontWeight="Bold" Foreground="White"/>
                                    </StackPanel>
                                    <TextBlock Text="Safe training ground for new miners. Abundant common minerals with low danger."
                                               FontSize="11" 
                                               Foreground="LightGray" 
                                               TextWrapping="Wrap"/>
                                </StackPanel>
                            </Border>
                        </StackPanel>
                    </StackPanel>

                    <!-- Right Column - Avatar & Preferences -->
                    <StackPanel Grid.Column="1" Spacing="20" Margin="20,0,0,0">
                        <TextBlock Text="🎨 Miner Avatar" FontSize="18" FontWeight="Bold" Foreground="#FFD700"/>

                        <!-- Avatar Selection -->
                        <StackPanel Spacing="10">
                            <TextBlock Text="Choose Your Avatar Style" FontSize="14" FontWeight="Bold" Foreground="White"/>

                            <RadioButton x:Name="ClassicAvatarRadio" Content="👨‍⚒️ Classic Miner" IsChecked="True" 
                                         Foreground="White" FontSize="12" Margin="0,5,0,5"/>
                            <RadioButton x:Name="FemaleAvatarRadio" Content="👩‍⚒️ Female Miner" 
                                         Foreground="White" FontSize="12" Margin="0,5,0,5"/>
                            <RadioButton x:Name="ScientistAvatarRadio" Content="👨‍🔬 Quantum Scientist" 
                                         Foreground="White" FontSize="12" Margin="0,5,0,5"/>
                            <RadioButton x:Name="CyberpunkAvatarRadio" Content="🤖 Cyberpunk Miner" 
                                         Foreground="White" FontSize="12" Margin="0,5,0,5"/>
                            <RadioButton x:Name="QuantumAvatarRadio" Content="🌌 Quantum Explorer" 
                                         Foreground="White" FontSize="12" Margin="0,5,0,5"/>
                        </StackPanel>

                        <!-- Starting Bonuses Preview -->
                        <StackPanel Spacing="8">
                            <TextBlock Text="🎁 Starting Package" FontSize="14" FontWeight="Bold" Foreground="White"/>
                            <Border Background="#AA2D2D30" 
                                    CornerRadius="8" 
                                    Padding="15,10,15,10" 
                                    BorderBrush="#60FFD700" 
                                    BorderThickness="1,1,1,1">
                                <StackPanel Spacing="5">
                                    <TextBlock Text="💰 Starting Funds: £10,000" FontSize="12" Foreground="LightGreen"/>
                                    <TextBlock Text="⛏️ Basic Mining Pickaxe" FontSize="12" Foreground="White"/>
                                    <TextBlock Text="⛑️ Safety Equipment Set" FontSize="12" Foreground="White"/>
                                    <TextBlock Text="🔦 LED Mining Lantern" FontSize="12" Foreground="White"/>
                                    <TextBlock Text="📊 Tutorial Access" FontSize="12" Foreground="LightBlue"/>
                                </StackPanel>
                            </Border>
                        </StackPanel>

                        <!-- Game Mode Info -->
                        <StackPanel Spacing="8">
                            <TextBlock Text="🚀 Game Mode" FontSize="14" FontWeight="Bold" Foreground="White"/>
                            <Border Background="#AA2D2D30" 
                                    CornerRadius="8" 
                                    Padding="15,10,15,10" 
                                    BorderBrush="#9370DB" 
                                    BorderThickness="1,1,1,1">
                                <StackPanel Spacing="5">
                                    <TextBlock Text="Ultimate Edition Features:" FontSize="12" FontWeight="Bold" Foreground="#9370DB"/>
                                    <TextBlock Text="• Quantum Realm Access" FontSize="11" Foreground="White"/>
                                    <TextBlock Text="• Advanced Market Simulation" FontSize="11" Foreground="White"/>
                                    <TextBlock Text="• Comprehensive Achievement System" FontSize="11" Foreground="White"/>
                                    <TextBlock Text="• Real-time Economic Events" FontSize="11" Foreground="White"/>
                                    <TextBlock Text="• Story-driven Narratives" FontSize="11" Foreground="White"/>
                                </StackPanel>
                            </Border>
                        </StackPanel>
                    </StackPanel>
                </Grid>
            </Border>

            <!-- Footer Buttons -->
            <Border Grid.Row="2" Style="{StaticResource SetupCardStyle}">
                <StackPanel Orientation="Horizontal" HorizontalAlignment="Center" Spacing="20">
                    <Button x:Name="CancelButton" 
                            Style="{StaticResource SetupButtonStyle}" 
                            MinWidth="150" 
                            Click="CancelButton_Click">
                        <StackPanel Orientation="Horizontal" Spacing="8">
                            <TextBlock Text="❌" FontSize="16"/>
                            <TextBlock Text="CANCEL" FontWeight="Bold"/>
                        </StackPanel>
                    </Button>

                    <Button x:Name="CreatePlayerButton" 
                            Style="{StaticResource PrimarySetupButtonStyle}" 
                            MinWidth="200" 
                            Click="CreatePlayerButton_Click">
                        <StackPanel Orientation="Horizontal" Spacing="8">
                            <TextBlock Text="🚀" FontSize="16"/>
                            <TextBlock Text="START MINING CAREER" FontWeight="Bold"/>
                        </StackPanel>
                    </Button>
                </StackPanel>
            </Border>
        </Grid>

        <!-- Loading Overlay -->
        <Grid x:Name="LoadingOverlay" Background="#CC000000" Visibility="Collapsed">
            <Border Background="#DD2D2D30" 
                    CornerRadius="15" 
                    Padding="40,30,40,30" 
                    BorderBrush="#FFD700" 
                    BorderThickness="2,2,2,2"
                    HorizontalAlignment="Center"
                    VerticalAlignment="Center">
                <StackPanel Spacing="15">
                    <StackPanel Orientation="Horizontal" Spacing="15" HorizontalAlignment="Center">
                        <TextBlock Text="⚙️" FontSize="32"/>
                        <TextBlock Text="Creating Your Mining Profile..." FontSize="16" FontWeight="Bold" Foreground="#FFD700"/>
                    </StackPanel>
                    <TextBlock Text="Initializing quantum mining systems..." FontSize="12" Foreground="LightGray" HorizontalAlignment="Center"/>
                </StackPanel>
            </Border>
        </Grid>
    </Grid>
</Window>